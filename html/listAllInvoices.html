<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!DOCTYPE html>
<html lang="en">
<body>
<div id="space"></div>
<p></p>
<p></p>
<p>
<p>
<div id="target_table_id">
</div>


<script>
    $(document).ready(function(){
          $("#space").empty().append("Invoice Manager APP (all invoices), ");
           $("#space").css('color', 'blue');
            $.getJSON("/health", function(result){
                $.each(result, function(key, value){
                   if (key.toString() === 'version') {
                      $("#space").append(" "+ key + ":" + value);
                   }
                });
            });
        });

   $.getJSON("http://localhost:3000/getAllInvoices" , function(data) {
   //const data = {"e232323fefdfs232sccse22":{"invoiceId":"e232323fefdfs232sccse22","clintId":"44444323233232","amount":32340,"date":"2011-10-05T14:48:00.000Z","paid":"y","remittanceId":"231212112121","paidOn":"2023-06-15T21:08:42.773Z"},"2221hjssjksnq2111122222":{"invoiceId":"2221hjssjksnq2111122222","clintId":"778888666","amount":9340,"date":"2011-10-05T14:48:00.000Z","paid":"y","remittanceId":"231212112121","paidOn":"2023-06-15T21:08:42.773Z"}};
   var tbl_body = document.createElement("table");
   var tbl_header = tbl_body.insertRow();
   tbl_header.insertCell().appendChild(document.createTextNode("invoiceID"));
   tbl_header.insertCell().appendChild(document.createTextNode("clientID"));
   tbl_header.insertCell().appendChild(document.createTextNode("amount"));
   tbl_header.insertCell().appendChild(document.createTextNode("dated"));
   tbl_header.insertCell().appendChild(document.createTextNode("paid"));
   tbl_header.insertCell().appendChild(document.createTextNode("remittenceID"));
   tbl_header.insertCell().appendChild(document.createTextNode("paidOn"));

    $.each(data, function() {
        var tbl_row = tbl_body.insertRow();
        $.each(this, function(k , v) {
            tbl_row.insertCell().appendChild(document.createTextNode(JSON.stringify(v, null, 2)));
        });
    });
   tbl_body.setAttribute('border', '1')
   tbl_body.setAttribute('rules', 'all')
    $("#target_table_id").append(tbl_body);   //DOM table doesn't have .appendChild
 });

</script>
</body>
</html>
